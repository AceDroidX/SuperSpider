import{u as x,_ as C,V as D}from"./CVk5FFF2.js";import{d as S,E as F,F as V,k as n,r as l,o as b,e as q,n as B,x as E,y as L,B as d,G as r,C as N,D as R,A as $,H as A}from"./Ce15lXcl.js";import{u as U}from"./BMUuKLY5.js";import"./Dzlx3iFJ.js";const I=S({__name:"mini",setup(H){const p=B(),t=F(),f=V(),i=n(()=>{var e;return parseFloat(((e=t.query.room)==null?void 0:e.toString())??"21452505")||21452505}),v=n(()=>t.query.mark?t.query.mark==="true":!0),_=n(()=>{var e;return parseFloat(((e=t.query.limit)==null?void 0:e.toString())??"100")||100}),k=n(()=>t.query.dark?t.query.dark==="true":!0);U({title:"BiliSC(mini)",titleTemplate:`${i.value} - %s`});let a;const u=l([]),o=l(!1),s=l("Error");b(async()=>{f.global.name.value=k?"dark":"light",await w()}),q(()=>g());async function w(){i&&(console.log("startFetchData"),await c(),a&&clearTimeout(a),y())}function y(){const e=async()=>{await c(),a=setTimeout(e,8e3)};a=setTimeout(e,8e3)}async function c(){try{const e=await x(p.public.BASE_API_URL+"/sc/getData",{method:"POST",body:`roomid=${i.value}&limit=${_.value}`,headers:{"Content-Type":"application/x-www-form-urlencoded"}},"$sNgfOFVaxZ");u.value=e.data}catch(e){o.value=!0,e.response!==void 0&&e.response.data!==void 0?s.value=e.message+`
`+e.response.data:s.value=e.name+": "+e.message,console.warn(e)}}function g(){a&&clearTimeout(a),a=void 0,u.value=[]}return(e,m)=>{const h=C;return L(),E("div",null,[d(h,{rawscdata:r(u).value,showmarknative:r(v)},null,8,["rawscdata","showmarknative"]),d(D,{modelValue:r(o),"onUpdate:modelValue":m[0]||(m[0]=T=>A(o)?o.value=T:null)},{default:N(()=>[R($(r(s)),1)]),_:1},8,["modelValue"])])}}});export{I as default};
