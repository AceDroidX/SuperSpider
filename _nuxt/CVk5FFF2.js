var be=Object.defineProperty;var we=(e,t,a)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var M=(e,t,a)=>we(e,typeof t!="symbol"?t+"":t,a);import{J as pe,k as j,K as S,a as Be,L as C,M as Se,N as Ce,O as Pe,Q as le,I as N,R as de,r as W,s as O,S as ke,T as fe,U as Me,G as Ie,V as Ee,W as he,X as Te,Y as Ve,_ as me,x as J,y as $,z as _,Z as Le,A as R,$ as te,a0 as Oe,C as xe,a1 as Re,a2 as je,B as G,a3 as Ne,a4 as Fe,a5 as Ue,a6 as ze,a7 as We,o as $e,a8 as Ge,a9 as qe,aa as He,ab as ae,ac as Ye}from"./Ce15lXcl.js";import{V as Je,u as Qe,a as Xe,b as Ze,c as Ae,d as Ke,f as et,m as tt,e as at,g as st,h as nt,i as rt,j as it,k as se,l as ot,n as ct,o as ut,p as lt}from"./Dzlx3iFJ.js";const dt={trailing:!0};function ft(e,t=25,a={}){if(a={...dt,...a},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let s,n,i=[],r,o;const c=(f,d)=>(r=ht(e,f,d),r.finally(()=>{if(r=null,a.trailing&&o&&!n){const v=c(f,o);return o=null,v}}),r);return function(...f){return r?(a.trailing&&(o=f),r):new Promise(d=>{const v=!n&&a.leading;clearTimeout(n),n=setTimeout(()=>{n=null;const u=a.leading?s:c(this,f);for(const g of i)g(u);i=[]},t),v?(s=c(this,f),d(s)):i.push(d)})}}async function ht(e,t,a){return await e.apply(t,a)}const mt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],yt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",I=[];class gt{constructor(){M(this,"_data",new L);M(this,"_hash",new L([...mt]));M(this,"_nDataBytes",0);M(this,"_minBufferSize",0)}finalize(t){t&&this._append(t);const a=this._nDataBytes*8,s=this._data.sigBytes*8;return this._data.words[s>>>5]|=128<<24-s%32,this._data.words[(s+64>>>9<<4)+14]=Math.floor(a/4294967296),this._data.words[(s+64>>>9<<4)+15]=a,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(t,a){const s=this._hash.words;let n=s[0],i=s[1],r=s[2],o=s[3],c=s[4],f=s[5],d=s[6],v=s[7];for(let u=0;u<64;u++){if(u<16)I[u]=t[a+u]|0;else{const h=I[u-15],m=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,p=I[u-2],b=(p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10;I[u]=m+I[u-7]+b+I[u-16]}const g=c&f^~c&d,l=n&i^n&r^i&r,y=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),B=(c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25),P=v+B+g+yt[u]+I[u],w=y+l;v=d,d=f,f=c,c=o+P|0,o=r,r=i,i=n,n=P+w|0}s[0]=s[0]+n|0,s[1]=s[1]+i|0,s[2]=s[2]+r|0,s[3]=s[3]+o|0,s[4]=s[4]+c|0,s[5]=s[5]+f|0,s[6]=s[6]+d|0,s[7]=s[7]+v|0}_append(t){typeof t=="string"&&(t=L.fromUtf8(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(t){let a,s=this._data.sigBytes/64;t?s=Math.ceil(s):s=Math.max((s|0)-this._minBufferSize,0);const n=s*16,i=Math.min(n*4,this._data.sigBytes);if(n){for(let r=0;r<n;r+=16)this._doProcessBlock(this._data.words,r);a=this._data.words.splice(0,n),this._data.sigBytes-=i}return new L(a,i)}}class L{constructor(t,a){M(this,"words");M(this,"sigBytes");t=this.words=t||[],this.sigBytes=a===void 0?t.length*4:a}static fromUtf8(t){const a=unescape(encodeURIComponent(t)),s=a.length,n=[];for(let i=0;i<s;i++)n[i>>>2]|=(a.charCodeAt(i)&255)<<24-i%4*8;return new L(n,s)}toBase64(){const t=[];for(let a=0;a<this.sigBytes;a+=3){const s=this.words[a>>>2]>>>24-a%4*8&255,n=this.words[a+1>>>2]>>>24-(a+1)%4*8&255,i=this.words[a+2>>>2]>>>24-(a+2)%4*8&255,r=s<<16|n<<8|i;for(let o=0;o<4&&a*8+o*6<this.sigBytes*8;o++)t.push(vt.charAt(r>>>6*(3-o)&63))}return t.join("")}concat(t){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let a=0;a<t.sigBytes;a++){const s=t.words[a>>>2]>>>24-a%4*8&255;this.words[this.sigBytes+a>>>2]|=s<<24-(this.sigBytes+a)%4*8}else for(let a=0;a<t.sigBytes;a+=4)this.words[this.sigBytes+a>>>2]=t.words[a>>>2];this.sigBytes+=t.sigBytes}}function _t(e){return new gt().finalize(e).toBase64()}function V(e){return _t(pe(e))}const Dt=Symbol.for("nuxt:client-only"),bt=e=>e==="defer"||e===!1;function wt(...e){var g;const t=typeof e[e.length-1]=="string"?e.pop():void 0;pt(e[0],e[1])&&e.unshift(t);let[a,s,n={}]=e;const i=j(()=>S(a));if(typeof i.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof s!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const r=Be();n.server??(n.server=!0),n.default??(n.default=St),n.getCachedData??(n.getCachedData=ve),n.lazy??(n.lazy=!1),n.immediate??(n.immediate=!0),n.deep??(n.deep=C.deep),n.dedupe??(n.dedupe="cancel"),n._functionName,r._asyncData[i.value];const o={cause:"initial",dedupe:n.dedupe};(g=r._asyncData[i.value])!=null&&g._init||(o.cachedData=n.getCachedData(i.value,r,{cause:"initial"}),r._asyncData[i.value]=ne(r,i.value,s,n,o.cachedData));const c=r._asyncData[i.value];c._deps++;const f=()=>r._asyncData[i.value].execute(o),d=n.server!==!1&&r.payload.serverRendered;{let l=function(h){const m=r._asyncData[h];m!=null&&m._deps&&(m._deps--,m._deps===0&&(m==null||m._off()))};const y=Se();if(y&&d&&n.immediate&&!y.sp&&(y.sp=[]),y&&!y._nuxtOnBeforeMountCbs){y._nuxtOnBeforeMountCbs=[];const h=y._nuxtOnBeforeMountCbs;Ce(()=>{h.forEach(m=>{m()}),h.splice(0,h.length)}),Pe(()=>h.splice(0,h.length))}const B=y&&(y._nuxtClientOnly||le(Dt,!1));d&&r.isHydrating&&(c.error.value||c.data.value!=null)?(c.pending.value=!1,c.status.value=c.error.value?"error":"success"):y&&(!B&&r.payload.serverRendered&&r.isHydrating||n.lazy)&&n.immediate?y._nuxtOnBeforeMountCbs.push(f):n.immediate&&f();const P=Ee(),w=N([i,...n.watch||[]],([h],[m])=>{var p,b;if((h||m)&&h!==m){const k=((p=r._asyncData[m])==null?void 0:p.data.value)!==C.value;m&&l(m);const T={cause:"initial",dedupe:n.dedupe};(b=r._asyncData[h])!=null&&b._init||(T.cachedData=n.getCachedData(h,r,{cause:"initial"}),r._asyncData[h]=ne(r,h,s,n,T.cachedData)),r._asyncData[h]._deps++,(n.immediate||k)&&r._asyncData[h].execute(T)}else c._execute({cause:"watch",dedupe:n.dedupe})},{flush:"sync"});P&&de(()=>{w(),l(i.value)})}const v={data:z(()=>{var l;return(l=r._asyncData[i.value])==null?void 0:l.data}),pending:z(()=>{var l;return(l=r._asyncData[i.value])==null?void 0:l.pending}),status:z(()=>{var l;return(l=r._asyncData[i.value])==null?void 0:l.status}),error:z(()=>{var l;return(l=r._asyncData[i.value])==null?void 0:l.error}),refresh:(...l)=>r._asyncData[i.value].execute(...l),execute:(...l)=>r._asyncData[i.value].execute(...l),clear:()=>ye(r,i.value)},u=Promise.resolve(r._asyncDataPromises[i.value]).then(()=>v);return Object.assign(u,v),u}function z(e){return j({get(){var t;return(t=e())==null?void 0:t.value},set(t){const a=e();a&&(a.value=t)}})}function pt(e,t){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof t=="function")}function ye(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=C.errorValue),e._asyncData[t]&&(e._asyncData[t].data.value=void 0,e._asyncData[t].error.value=C.errorValue,e._asyncData[t].pending.value=!1,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]&&(e._asyncDataPromises[t].cancelled=!0),e._asyncDataPromises[t]=void 0)}function Bt(e,t){const a={};for(const s of t)a[s]=e[s];return a}function ne(e,t,a,s,n){var v;(v=e.payload._errors)[t]??(v[t]=C.errorValue);const i=s.getCachedData!==ve,r=a,o=s.deep?W:O,c=n!=null,f=e.hook("app:data:refresh",async u=>{(!u||u.includes(t))&&await d.execute({cause:"refresh:hook"})}),d={data:o(c?n:s.default()),pending:O(!c),error:ke(e.payload._errors,t),status:O("idle"),execute:(u={})=>{if(e._asyncDataPromises[t]){if(bt(u.dedupe??s.dedupe))return e._asyncDataPromises[t];e._asyncDataPromises[t].cancelled=!0}if(u.cause==="initial"||e.isHydrating){const l="cachedData"in u?u.cachedData:s.getCachedData(t,e,{cause:u.cause??"refresh:manual"});if(l!=null)return e.payload.data[t]=d.data.value=l,d.error.value=C.errorValue,d.status.value="success",Promise.resolve(l)}d.pending.value=!0,d.status.value="pending";const g=new Promise((l,y)=>{try{l(r(e))}catch(B){y(B)}}).then(async l=>{if(g.cancelled)return e._asyncDataPromises[t];let y=l;s.transform&&(y=await s.transform(l)),s.pick&&(y=Bt(y,s.pick)),e.payload.data[t]=y,d.data.value=y,d.error.value=C.errorValue,d.status.value="success"}).catch(l=>{if(g.cancelled)return e._asyncDataPromises[t];d.error.value=Me(l),d.data.value=Ie(s.default()),d.status.value="error"}).finally(()=>{g.cancelled||(d.pending.value=!1,delete e._asyncDataPromises[t])});return e._asyncDataPromises[t]=g,e._asyncDataPromises[t]},_execute:ft((...u)=>d.execute(...u),0,{leading:!0}),_default:s.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{var u;f(),(u=e._asyncData[t])!=null&&u._init&&(e._asyncData[t]._init=!1),i||fe(()=>{var g;(g=e._asyncData[t])!=null&&g._init||(ye(e,t),d.execute=()=>Promise.resolve(),d.data.value=C.value)})}};return d}const St=()=>C.value,ve=(e,t,a)=>{if(t.isHydrating)return t.payload.data[e];if(a.cause!=="refresh:manual"&&a.cause!=="refresh:hook")return t.static.data[e]};function na(e,t,a){const[s={},n]=typeof t=="string"?[{},t]:[t,a],i=j(()=>S(e)),r=j(()=>S(s.key)||"$f"+V([n,typeof i.value=="string"?i.value:"",...Ct(s)]));if(!s.baseURL&&typeof i.value=="string"&&i.value[0]==="/"&&i.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:o,lazy:c,default:f,transform:d,pick:v,watch:u,immediate:g,getCachedData:l,deep:y,dedupe:B,...P}=s,w=he({...Te,...P,cache:typeof s.cache=="boolean"?void 0:s.cache}),h={server:o,lazy:c,default:f,transform:d,pick:v,immediate:g,getCachedData:l,deep:y,dedupe:B,watch:u===!1?[]:[...u||[],w]};if(!g){let b=function(){h.immediate=!0};N(r,b,{flush:"sync",once:!0}),N([...u||[],w],b,{flush:"sync",once:!0})}let m;return wt(u===!1?r.value:r,()=>{var F;(F=m==null?void 0:m.abort)==null||F.call(m,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),m=typeof AbortController<"u"?new AbortController:{};const b=S(s.timeout);let k;return b&&(k=setTimeout(()=>m.abort(new DOMException("Request aborted due to timeout.","AbortError")),b),m.signal.onabort=()=>clearTimeout(k)),(s.$fetch||globalThis.$fetch)(i.value,{signal:m.signal,...w}).finally(()=>{clearTimeout(k)})},h)}function Ct(e){var a;const t=[((a=S(e.method))==null?void 0:a.toUpperCase())||"GET",S(e.baseURL)];for(const s of[e.params||e.query]){const n=S(s);if(!n)continue;const i={};for(const[r,o]of Object.entries(n))i[S(r)]=S(o);t.push(i)}if(e.body){const s=S(e.body);if(!s)t.push(V(s));else if(s instanceof ArrayBuffer)t.push(V(Object.fromEntries([...new Uint8Array(s).entries()].map(([n,i])=>[n,i.toString()]))));else if(s instanceof FormData){const n={};for(const i of s.entries()){const[r,o]=i;n[r]=o instanceof File?o.name:o}t.push(V(n))}else if(Ve(s))t.push(V(he(s)));else try{t.push(V(s))}catch{console.warn("[useFetch] Failed to hash body",s)}}return t}const Pt={props:{title:{type:String,default:"（获取失败）"},price:{type:Number,default:0},message:{type:String,default:"（获取失败）"},messagejpn:{type:String,default:"（获取失败）"},avatar:{type:String,default:"https://static.hdslb.com/images/member/noface.gif"},uid:{type:Number,default:0},contentcolor:{type:String,default:"#1565c0"},headercolor:{type:String,default:"#125aac"},exrate:{type:Number,default:14.7},hiderate:{type:Boolean,default:!1},ts:{type:Number,default:0},markstate:{type:Number,default:0}},computed:{headerColorNative(){return this.markstate===1?{"background-color":"#777777"}:this.$vuetify.theme.current.dark?{"background-color":this.shadeColor(this.headercolor,-20)}:{"background-color":this.headercolor}},contentColorNative(){return this.markstate===1?{"background-color":"#666666"}:this.$vuetify.theme.current.dark?{"background-color":this.shadeColor(this.contentcolor,-20)}:{"background-color":this.contentcolor}}},methods:{shadeColor(e,t){let a=parseInt(e.substring(1,3),16),s=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);a=parseInt(a*(100+t)/100),s=parseInt(s*(100+t)/100),n=parseInt(n*(100+t)/100),a=a<255?a:255,s=s<255?s:255,n=n<255?n:255;const i=a.toString(16).length===1?"0"+a.toString(16):a.toString(16),r=s.toString(16).length===1?"0"+s.toString(16):s.toString(16),o=n.toString(16).length===1?"0"+n.toString(16):n.toString(16);return"#"+i+r+o},openUserSpace(e){e!==0&&window.open(`https://space.bilibili.com/${e}`)}}},kt={id:"card",class:"style-scope yt-live-chat-paid-message-renderer"},Mt=["src"],It={id:"header-content",class:"style-scope yt-live-chat-paid-message-renderer"},Et={id:"header-content-primary-column",class:"no-transition style-scope yt-live-chat-paid-message-renderer"},Tt={id:"author-name",class:"style-scope yt-live-chat-paid-message-renderer",style:{"white-space":"nowrap"}},Vt={id:"purchase-amount",class:"style-scope yt-live-chat-paid-message-renderer",style:{"font-size":"90%","transform-origin":"left"}},Lt={style:{float:"right"}},Ot={id:"message",dir:"auto",class:"style-scope yt-live-chat-paid-message-renderer"},xt={id:"message",dir:"auto",class:"style-scope yt-live-chat-paid-message-renderer"};function Rt(e,t,a,s,n,i){return $(),J("div",kt,[_("div",{id:"header",class:"style-scope yt-live-chat-paid-message-renderer",style:te(i.headerColorNative)},[_("img",{id:"author-photo",referrerpolicy:"no-referer",rel:"no-referer",class:"style-scope yt-img-shadow no-transition style-scope yt-live-chat-paid-message-renderer",height:"40",width:"40",src:a.avatar,onClick:t[0]||(t[0]=Le(r=>i.openUserSpace(a.uid),["stop"]))},null,8,Mt),_("div",It,[_("div",Et,[_("div",Tt,R(a.title),1),_("div",Vt,[_("span",null,R(a.hiderate?"￥"+a.price:"￥"+a.price+" = "+a.price*a.exrate+"円"),1),_("span",Lt,R(a.ts==0?"获取失败":e.$getTime(a.ts)),1)])])])],4),_("div",{id:"content",class:"style-scope yt-live-chat-paid-message-renderer",style:te(i.contentColorNative)},[_("div",Ot,R(a.message),1),_("div",xt,R(a.messagejpn),1)],4)])}const jt=me(Pt,[["render",Rt]]),Q=(e,t)=>t.some(a=>e instanceof a);let re,ie;function Nt(){return re||(re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ft(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X=new WeakMap,H=new WeakMap,q=new WeakMap;function Ut(e){const t=new Promise((a,s)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",r)},i=()=>{a(E(e.result)),n()},r=()=>{s(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",r)});return q.set(t,e),t}function zt(e){if(X.has(e))return;const t=new Promise((a,s)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",r),e.removeEventListener("abort",r)},i=()=>{a(),n()},r=()=>{s(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",r),e.addEventListener("abort",r)});X.set(e,t)}let Z={get(e,t,a){if(e instanceof IDBTransaction){if(t==="done")return X.get(e);if(t==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return E(e[t])},set(e,t,a){return e[t]=a,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function ge(e){Z=e(Z)}function Wt(e){return Ft().includes(e)?function(...t){return e.apply(A(this),t),E(this.request)}:function(...t){return E(e.apply(A(this),t))}}function $t(e){return typeof e=="function"?Wt(e):(e instanceof IDBTransaction&&zt(e),Q(e,Nt())?new Proxy(e,Z):e)}function E(e){if(e instanceof IDBRequest)return Ut(e);if(H.has(e))return H.get(e);const t=$t(e);return t!==e&&(H.set(e,t),q.set(t,e)),t}const A=e=>q.get(e);function Gt(e,t,{blocked:a,upgrade:s,blocking:n,terminated:i}={}){const r=indexedDB.open(e,t),o=E(r);return s&&r.addEventListener("upgradeneeded",c=>{s(E(r.result),c.oldVersion,c.newVersion,E(r.transaction),c)}),a&&r.addEventListener("blocked",c=>a(c.oldVersion,c.newVersion,c)),o.then(c=>{i&&c.addEventListener("close",()=>i()),n&&c.addEventListener("versionchange",f=>n(f.oldVersion,f.newVersion,f))}).catch(()=>{}),o}const qt=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],Y=new Map;function oe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Y.get(t))return Y.get(t);const a=t.replace(/FromIndex$/,""),s=t!==a,n=Ht.includes(a);if(!(a in(s?IDBIndex:IDBObjectStore).prototype)||!(n||qt.includes(a)))return;const i=async function(r,...o){const c=this.transaction(r,n?"readwrite":"readonly");let f=c.store;return s&&(f=f.index(o.shift())),(await Promise.all([f[a](...o),n&&c.done]))[0]};return Y.set(t,i),i}ge(e=>({...e,get:(t,a,s)=>oe(t,a)||e.get(t,a,s),has:(t,a)=>!!oe(t,a)||e.has(t,a)}));const Yt=["continue","continuePrimaryKey","advance"],ce={},K=new WeakMap,_e=new WeakMap,Jt={get(e,t){if(!Yt.includes(t))return e[t];let a=ce[t];return a||(a=ce[t]=function(...s){K.set(this,_e.get(this)[t](...s))}),a}};async function*Qt(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const a=new Proxy(t,Jt);for(_e.set(a,t),q.set(a,A(t));t;)yield a,t=await(K.get(a)||t.continue()),K.delete(a)}function ue(e,t){return t===Symbol.asyncIterator&&Q(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&Q(e,[IDBIndex,IDBObjectStore])}ge(e=>({...e,get(t,a,s){return ue(t,a)?Qt:e.get(t,a,s)},has(t,a){return ue(t,a)||e.has(t,a)}}));const Xt={name:"SCList",props:{rawscdata:{type:Array,default:()=>[]},showmarknative:{type:Boolean,default:!1}},data(){return{scData:[],started:!1,db:void 0}},watch:{async rawscdata(e){await this.updateData(e)}},async mounted(){this.db=await Gt("BiliSC",void 0,{upgrade(e){console.log("upgrade"),e.createObjectStore("MarkState",{keyPath:"id"}).createIndex("id","id",{unique:!0})}})},methods:{async updateData(e){try{const t=e.slice();for(const[a,s]of t.entries())s.hide&&t.splice(a,1),this.showmarknative?s.markstate=await this.getMarkState(s.id):s.markstate=0;this.scData=t}catch(t){console.error(t)}},async changeMarkState(e){this.showmarknative&&(console.log("change state:"+e),this.db!==void 0&&(await this.getMarkState(e)===1?await this.deleteMarkState(e):await this.setMarkState(e,1),await this.updateData(this.rawscdata)))},async getMarkState(e){if(this.db===void 0)return;const t=await this.db.get("MarkState",e);return t?t.state:0},async deleteMarkState(e){this.db!==void 0&&await this.db.delete("MarkState",e)},async setMarkState(e,t){this.db!==void 0&&await this.db.put("MarkState",{id:e,state:t})}}},Zt={align:"center"};function At(e,t,a,s,n,i){const r=jt;return $(),Oe(Je,null,{default:xe(()=>[_("div",Zt,[($(!0),J(je,null,Re(n.scData,o=>($(),J("div",{key:o.id,style:{"margin-bottom":"20px"}},[G(r,{title:o.uname,price:Number(o.price),message:o.msg,messagejpn:"",avatar:o.avatar,uid:o.uid,contentcolor:o.bcolor,headercolor:o.pcolor,hiderate:!0,ts:o.ts,markstate:o.markstate,style:{"max-width":"700px"},align:"left",onClick:c=>i.changeMarkState(o.id)},null,8,["title","price","message","avatar","uid","contentcolor","headercolor","ts","markstate","onClick"])]))),128))])]),_:1})}const ra=me(Xt,[["render",At]]);function Kt(e){const t=O(e());let a=-1;function s(){clearInterval(a)}function n(){s(),fe(()=>t.value=e())}function i(r){const o=r?getComputedStyle(r):{transitionDuration:.2},c=parseFloat(o.transitionDuration)*1e3||200;if(s(),t.value<=0)return;const f=performance.now();a=window.setInterval(()=>{const d=performance.now()-f+c;t.value=Math.max(e()-d,0),t.value<=0&&s()},c)}return de(s),{clear:s,time:t,start:i,reset:n}}const ea=Fe({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...rt({location:"bottom"}),...nt(),...st(),...at(),...He(),...qe(tt({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),ia=Ne()({name:"VSnackbar",props:ea(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const s=Ue(e,"modelValue"),{positionClasses:n}=Qe(e),{scopeId:i}=Xe(),{themeClasses:r}=ze(e),{colorClasses:o,colorStyles:c,variantClasses:f}=Ze(e),{roundedClasses:d}=Ae(e),v=Kt(()=>Number(e.timeout)),u=W(),g=W(),l=O(!1),y=O(0),B=W(),P=le(it,void 0);We(()=>!!P,()=>{const D=lt();Ye(()=>{B.value=D.mainStyles.value})}),N(s,h),N(()=>e.timeout,h),$e(()=>{s.value&&h()});let w=-1;function h(){v.reset(),window.clearTimeout(w);const D=Number(e.timeout);if(!s.value||D===-1)return;const x=Ge(g.value);v.start(x),w=window.setTimeout(()=>{s.value=!1},D)}function m(){v.reset(),window.clearTimeout(w)}function p(){l.value=!0,m()}function b(){l.value=!1,h()}function k(D){y.value=D.touches[0].clientY}function T(D){Math.abs(y.value-D.changedTouches[0].clientY)>50&&(s.value=!1)}function F(){l.value&&b()}const De=j(()=>e.location.split(" ").reduce((D,x)=>(D[`v-snackbar--${x}`]=!0,D),{}));return Ke(()=>{const D=se.filterProps(e),x=!!(a.default||a.text||e.text);return G(se,ae({ref:u,class:["v-snackbar",{"v-snackbar--active":s.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},De.value,n.value,e.class],style:[B.value,e.style]},D,{modelValue:s.value,"onUpdate:modelValue":U=>s.value=U,contentProps:ae({class:["v-snackbar__wrapper",r.value,o.value,d.value,f.value],style:[c.value],onPointerenter:p,onPointerleave:b},D.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:k,onTouchend:T,onAfterLeave:F},i),{default:()=>{var U,ee;return[ot(!1,"v-snackbar"),e.timer&&!l.value&&_("div",{key:"timer",class:"v-snackbar__timer"},[G(ct,{ref:g,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":v.time.value},null)]),x&&_("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((U=a.text)==null?void 0:U.call(a))??e.text,(ee=a.default)==null?void 0:ee.call(a)]),a.actions&&G(ut,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[_("div",{class:"v-snackbar__actions"},[a.actions({isActive:s})])]})]},activator:a.activator})}),et({},u)}});export{ia as V,ra as _,na as u};
