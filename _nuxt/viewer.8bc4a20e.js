import h from"./ThemeBtn.8b1b7a5a.js";import{_ as v}from"./BiliSCLogo.41eefcc5.js";import C from"./UsageTips.896241a5.js";import{V as u,a as l,b as k,c as x,d as S,_ as y}from"./AuthorCard.bdab681b.js";import b from"./ChangelogText.ab96b015.js";import{a as L,m as D,at as M,o as T,c as U,w as t,f as e,I as B,t as N,h as s,an as R}from"./entry.2cf9485d.js";import{V as F,a as I,b as O,c as m,d as A,e as f,f as $,k as j,g as q,h as G,i as K,j as P}from"./VSwitch.2b9737ae.js";import{V as p}from"./VContainer.64b1ec6b.js";import{V as d}from"./VBtn.f28c6d8c.js";import"./VIcon.bc6126ba.js";import"./tag.7f81d670.js";import"./color.f22f3f2e.js";import"./index.d7643f03.js";import"./router.295f1ffd.js";import"./position.9ad51159.js";import"./createSimpleFunctional.5cc6fc0d.js";import"./VAvatar.643c5b48.js";import"./transition.c1879f42.js";import"./VCardText.e284fb4f.js";import"./forwardRefs.115f55a5.js";const z={name:"SCViewerLayout",data(){return{roomlist:this.$config.ROOM_ID.split(","),drawer:!0,right:!0,rightDrawer:!1,title:"BiliSC",collapseOnScroll:!0,newVersionDialog:!1,version:"null"}},computed:{room:{get(){return this.$store.state.ViewerConfig.room},set(i){this.$store.commit("ViewerConfig/setRoom",i)}},pageLimit:{get(){return this.$store.state.ViewerConfig.pageLimit},set(i){this.$store.commit("ViewerConfig/setPageLimit",i)}},showMarkNative:{get(){return this.$store.state.ViewerConfig.showMarkNative},set(i){this.$store.commit("ViewerConfig/setShowMarkNative",i)}},miniViewerURL(){return`/mini?room=${this.room}&limit=${this.pageLimit}&mark=${this.showMarkNative}&dark=${this.$vuetify.theme.current.dark}`},...D("ViewerConfig",["startFetch"])},watch:{startFetch(){switch(this.$vuetify.display.name){case"xs":case"sm":this.drawer=!1;break}}},mounted(){this.version=this.$config.version;const i=localStorage.getItem("version");this.$config.version!==i&&(console.log("version changed"),this.newVersionDialog=!0)},methods:{...M("ViewerConfig",["setStartFetch"]),log(i){console.log(i)},setVersion(){localStorage.setItem("version",this.$config.version),this.newVersionDialog=!1},openLink(i,o){o?window.open(i,"BiliSC for OBS","menubar=0,location=0,scrollbars=0,toolbar=0,width=500,height=700"):window.open(i)},openMiniViewer(){this.setStartFetch(0),this.openLink(this.miniViewerURL,!0)},copyURL(){this.copyText(window.location.origin+this.miniViewerURL)},copyText(i){navigator.clipboard.writeText(i)}}};function E(i,o,H,J,n,r){const c=h,_=v,V=C,g=y,w=b;return T(),U(F,{dark:""},{default:t(()=>[e(A,{collapse:!n.drawer,"collapse-on-scroll":!1,"scroll-target":"#scrolling-techniques-6"},{default:t(()=>[e(I,{onClick:o[0]||(o[0]=B(a=>n.drawer=!n.drawer,["stop"]))}),e(O,{textContent:N(n.title)},null,8,["textContent"]),e(m),e(c)]),_:1},8,["collapse"]),e(K,{modelValue:n.drawer,"onUpdate:modelValue":o[9]||(o[9]=a=>n.drawer=a),width:"400"},{default:t(()=>[e(_,{class:"pb-4",version:n.version},null,8,["version"]),e(f),e(p,null,{default:t(()=>[e(u,{"no-gutters":"",align:"center"},{default:t(()=>[e(l,null,{default:t(()=>[s(" 标记显示 ")]),_:1}),e(l,null,{default:t(()=>[e($,{modelValue:r.showMarkNative,"onUpdate:modelValue":o[1]||(o[1]=a=>r.showMarkNative=a),"hide-details":"auto",flat:"",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{"no-gutters":"",align:"center"},{default:t(()=>[e(l,null,{default:t(()=>[s(" 显示数量 ")]),_:1}),e(l,null,{default:t(()=>[e(j,{modelValue:r.pageLimit,"onUpdate:modelValue":o[2]||(o[2]=a=>r.pageLimit=a),variant:"underlined","hide-details":"auto",density:"compact",class:"pb-3"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{"no-gutters":"",align:"center"},{default:t(()=>[e(l,null,{default:t(()=>[s(" 房间号 ")]),_:1}),e(l,null,{default:t(()=>[e(q,{modelValue:r.room,"onUpdate:modelValue":o[3]||(o[3]=a=>r.room=a),items:n.roomlist,variant:"underlined","hide-details":"auto",density:"compact",class:"pb-3"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(u,{"no-gutters":""},{default:t(()=>[e(l,null,{default:t(()=>[e(m)]),_:1}),e(l,{cols:"6"},{default:t(()=>[e(d,{block:"",variant:"outlined",onClick:o[4]||(o[4]=a=>i.setStartFetch(i.startFetch+1))},{default:t(()=>[s("GO")]),_:1})]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(l,null,{default:t(()=>[e(f)]),_:1})]),_:1}),e(u,{justify:"space-around"},{default:t(()=>[e(l,{cols:"4"},{default:t(()=>[e(d,{block:"",variant:"outlined",onClick:o[5]||(o[5]=a=>r.openMiniViewer())},{default:t(()=>[s("小窗模式")]),_:1})]),_:1}),e(l,{cols:"4"},{default:t(()=>[e(d,{block:"",variant:"outlined",onClick:o[6]||(o[6]=a=>r.copyURL())},{default:t(()=>[s("复制链接")]),_:1})]),_:1})]),_:1}),e(u,{justify:"space-around"},{default:t(()=>[e(l,{cols:"4"},{default:t(()=>[e(d,{block:"",variant:"outlined",onClick:o[7]||(o[7]=a=>n.newVersionDialog=!0)},{default:t(()=>[s("更新日志")]),_:1})]),_:1}),e(l,{cols:"4"},{default:t(()=>[e(d,{block:"",variant:"outlined",nuxt:"",to:"/history"},{default:t(()=>[s("历史SC")]),_:1})]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(l,null,{default:t(()=>[e(V,{class:"pb-3"})]),_:1})]),_:1}),e(u,{"no-gutters":""},{default:t(()=>[e(l,null,{default:t(()=>[e(g)]),_:1})]),_:1})]),_:1}),e(G,{modelValue:n.newVersionDialog,"onUpdate:modelValue":o[8]||(o[8]=a=>n.newVersionDialog=a),width:"500","onClick:outside":r.setVersion},{default:t(()=>[e(k,null,{default:t(()=>[e(x,{class:"text-h5"},{default:t(()=>[s(" 更新日志 ")]),_:1}),e(w),e(f),e(S,null,{default:t(()=>[e(m),e(d,{color:"primary",text:"",onClick:r.setVersion},{default:t(()=>[s(" OK ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","onClick:outside"])]),_:1},8,["modelValue"]),e(P,{id:"scrolling-techniques-6"},{default:t(()=>[e(p,null,{default:t(()=>[R(i.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3})}const _e=L(z,[["render",E],["__scopeId","data-v-45210120"]]);export{_e as default};
