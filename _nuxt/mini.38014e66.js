import{u as C,V as D,_ as S}from"./VSnackbar.8c13c53e.js";import{d as b,C as q,D as x,c as n,r as l,o as V,b as B,j as F,k as A,m as d,z as r,q as L,s as R,t as $,A as E,B as M}from"./entry.e5a10ea8.js";import{u as N}from"./vue.f36acd1f.79073c76.js";import"./variant.200e217a.js";const H=b({__name:"mini",setup(U){const p=M(),t=q(),f=x(),i=n(()=>{var e;return parseFloat(((e=t.query.room)==null?void 0:e.toString())??"21452505")||21452505}),v=n(()=>t.query.mark?t.query.mark==="true":!0),_=n(()=>{var e;return parseFloat(((e=t.query.limit)==null?void 0:e.toString())??"100")||100}),k=n(()=>t.query.dark?t.query.dark==="true":!0);N({title:"BiliSC(mini)",titleTemplate:`${i.value} - %s`});let a;const u=l([]),o=l(!1),s=l("Error");V(async()=>{f.global.name.value=k?"dark":"light",await w()}),B(()=>h());async function w(){i&&(console.log("startFetchData"),await c(),a&&clearTimeout(a),y())}function y(){const e=async()=>{await c(),a=setTimeout(e,8e3)};a=setTimeout(e,8e3)}async function c(){try{const e=await C(p.public.BASE_API_URL+"/sc/getData",{method:"POST",body:`roomid=${i.value}&limit=${_.value}`,headers:{"Content-Type":"application/x-www-form-urlencoded"}},"$vAtyt3MmGr");u.value=e.data}catch(e){o.value=!0,e.response!==void 0&&e.response.data!==void 0?s.value=e.message+`
`+e.response.data:s.value=e.name+": "+e.message,console.warn(e)}}function h(){a&&clearTimeout(a),a=void 0,u.value=[]}return(e,m)=>{const g=S;return F(),A("div",null,[d(g,{rawscdata:r(u).value,showmarknative:r(v)},null,8,["rawscdata","showmarknative"]),d(D,{modelValue:r(o),"onUpdate:modelValue":m[0]||(m[0]=T=>E(o)?o.value=T:null)},{default:L(()=>[R($(r(s)),1)]),_:1},8,["modelValue"])])}}});export{H as default};
