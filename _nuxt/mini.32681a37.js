import{u as C,V as D,_ as S}from"./VSnackbar.cfbcdccb.js";import{d as b,D as q,E as x,c as n,j as V,r as l,o as B,b as F,k as A,l as E,q as d,A as r,s as L,v as R,t as $,B as M,C as N}from"./entry.d2b400e9.js";import"./variant.1f848ebd.js";const H=b({__name:"mini",setup(U){const p=N(),t=q(),f=x(),i=n(()=>{var e;return parseFloat(((e=t.query.room)==null?void 0:e.toString())??"21452505")||21452505}),v=n(()=>t.query.mark?t.query.mark==="true":!0),_=n(()=>{var e;return parseFloat(((e=t.query.limit)==null?void 0:e.toString())??"100")||100}),k=n(()=>t.query.dark?t.query.dark==="true":!0);V({title:"BiliSC(mini)",titleTemplate:`${i.value} - %s`});let a;const u=l([]),o=l(!1),s=l("Error");B(async()=>{f.global.name.value=k?"dark":"light",await w()}),F(()=>h());async function w(){i&&(console.log("startFetchData"),await c(),a&&clearTimeout(a),y())}function y(){const e=async()=>{await c(),a=setTimeout(e,8e3)};a=setTimeout(e,8e3)}async function c(){try{const e=await C(p.public.BASE_API_URL+"/sc/getData",{method:"POST",body:`roomid=${i.value}&limit=${_.value}`,headers:{"Content-Type":"application/x-www-form-urlencoded"}},"$vAtyt3MmGr");u.value=e.data}catch(e){o.value=!0,e.response!==void 0&&e.response.data!==void 0?s.value=e.message+`
`+e.response.data:s.value=e.name+": "+e.message,console.warn(e)}}function h(){a&&clearTimeout(a),a=void 0,u.value=[]}return(e,m)=>{const g=S;return A(),E("div",null,[d(g,{rawscdata:r(u).value,showmarknative:r(v)},null,8,["rawscdata","showmarknative"]),d(D,{modelValue:r(o),"onUpdate:modelValue":m[0]||(m[0]=T=>M(o)?o.value=T:null)},{default:L(()=>[R($(r(s)),1)]),_:1},8,["modelValue"])])}}});export{H as default};
