import{V as _,_ as h,u as g}from"./CVk5FFF2.js";import{V as C}from"./B1VobMGF.js";import{d as T,r as i,e as x,I as D,x as V,B as l,G as n,C as k,H as y,y as S,D as b,A as B,n as N}from"./Ce15lXcl.js";import{u as F}from"./BMUuKLY5.js";import"./Dzlx3iFJ.js";const H=T({__name:"index",setup(L){const a=C(),f=N();F({title:"BiliSC",titleTemplate:`${a.room} - %s`});let t;const r=i([]),o=i(!1),s=i("Error");x(()=>c()),D(()=>a.startFetch,e=>{e?d():c()});async function d(){a.room&&(console.log("startFetchData"),await m(),t&&clearTimeout(t),p())}function p(){const e=async()=>{await m(),t=setTimeout(e,8e3)};t=setTimeout(e,8e3)}async function m(){if(!(!a.room||isNaN(Number(a.room))||a.room===""))try{const e=await g(f.public.BASE_API_URL+"/sc/getData",{method:"POST",body:`roomid=${a.room}&limit=${a.pageLimit}`,headers:{"Content-Type":"application/x-www-form-urlencoded"}},"$77hSeXQoip");r.value=e.data}catch(e){o.value=!0,e.response!==void 0&&e.response.data!==void 0?s.value=e.message+`
`+e.response.data:s.value=e.name+": "+e.message,console.warn(e)}}function c(){t&&clearTimeout(t),t=void 0,r.value=[]}return(e,u)=>{const v=h;return S(),V("div",null,[l(v,{rawscdata:n(r).value,showmarknative:n(a).showMarkNative},null,8,["rawscdata","showmarknative"]),l(_,{modelValue:n(o),"onUpdate:modelValue":u[0]||(u[0]=w=>y(o)?o.value=w:null)},{default:k(()=>[b(B(n(s)),1)]),_:1},8,["modelValue"])])}}});export{H as default};
